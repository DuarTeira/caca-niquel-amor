<!DOCTYPE html>
<html lang="pt-BR">
<head>
<link rel="manifest" href="manifest.json">
<meta charset="UTF-8">
<title>üé∞ Ca√ßa-N√≠quel do Amor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#ff758c,#ff7eb3);
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  transition:1s;
}
body.romantico{
  background: linear-gradient(135deg,#ff0844,#ffb199);
}
.container{
  background:#fff;
  padding:20px;
  border-radius:20px;
  width:95%;
  max-width:380px;
  text-align:center;
  box-shadow:0 10px 25px rgba(0,0,0,0.3);
}
.slots{
  display:flex;
  justify-content:space-between;
  margin:25px 0;
}
.slot{
  width:48%;
  height:90px;
  border:3px solid #ff4f70;
  border-radius:18px;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:20px;
  font-weight:bold;
  background:#fff0f5;
  padding:8px;
  text-align:center;
}
.slot.premio{
  animation:pulse 0.6s infinite alternate;
  box-shadow:0 0 25px #ff4f70;
}
@keyframes pulse{
  from{transform:scale(1)}
  to{transform:scale(1.1)}
}
button{
  width:100%;
  padding:14px;
  font-size:17px;
  border:none;
  border-radius:14px;
  background:#ff4f70;
  color:#fff;
  cursor:pointer;
  margin-top:8px;
}
button:disabled{opacity:0.6}
#resultado{
  margin-top:16px;
  font-size:18px;
  font-weight:bold;
}
#especial{
  margin-top:10px;
  font-size:16px;
  color:#c2185b;
}
#secreta{
  margin-top:10px;
  font-size:17px;
  color:#880e4f;
  display:none;
}
</style>
</head>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js");
}
</script>

<body>

<div class="container">
  <h1>üé∞ Ca√ßa-N√≠quel do Amor</h1>
  <p>Deixe a sorte decidir ‚ù§Ô∏è</p>

  <div class="slots">
    <div class="slot" id="slotComida">üçΩÔ∏è</div>
    <div class="slot" id="slotBebida">ü•§</div>
  </div>

  <button id="btnMusica">üé∂ Ligar m√∫sica</button>
  <button id="btnGirar">GIRAR üé∞</button>

  <div id="resultado"></div>
  <div id="especial"></div>
  <div id="secreta"></div>
</div>

<!-- Sons -->
<audio id="somGiro" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_89a4db90c0.mp3"></audio>
<audio id="somWin" src="https://cdn.pixabay.com/download/audio/2022/03/10/audio_5c5d0c2c15.mp3"></audio>
<audio id="musica" src="https://cdn.pixabay.com/download/audio/2022/01/18/audio_7b7e2e9a74.mp3" loop></audio>

<script>
const comidas=[
 {n:"üçù Lasanha",p:5},
 {n:"üçø Pipoca",p:5},
 {n:"üçõ Strogonoff",p:5},
 {n:"üçî Hamb√∫rguer",p:5},
 {n:"üçÆ Pudim",p:4},
 {n:"üçø Pipoca doce",p:4},
 {n:"üçï Pizza",p:5},
 {n:"üç≥ Ovo frito",p:1}
];

const bebidas=[
 "üç∑ Vinho","üßÉ Suco natural","ü•§ Coca-Cola",
 "üçä Fanta","üíß √Ågua","üç∫ Cerveja Stempell"
];

const slotC=document.getElementById("slotComida");
const slotB=document.getElementById("slotBebida");
const res=document.getElementById("resultado");
const esp=document.getElementById("especial");
const sec=document.getElementById("secreta");
const btnG=document.getElementById("btnGirar");
const btnM=document.getElementById("btnMusica");
const somG=document.getElementById("somGiro");
const somW=document.getElementById("somWin");
const musica=document.getElementById("musica");

btnM.onclick=()=>{
 musica.volume=0.25;
 musica.play();
 btnM.style.display="none";
};

function sortear(){
 let total=comidas.reduce((s,i)=>s+i.p,0);
 let r=Math.random()*total;
 for(let i of comidas){
  if(r<i.p) return i.n;
  r-=i.p;
 }
}

btnG.onclick=()=>{
 btnG.disabled=true;
 res.innerText="";
 esp.innerText="";
 sec.style.display="none";
 document.body.classList.remove("romantico");
 slotC.classList.remove("premio");
 slotB.classList.remove("premio");

 let v=40,g=0,max=32;
 somG.currentTime=0;
 somG.play();

 function animar(){
  slotC.innerText=sortear();
  slotB.innerText=bebidas[Math.floor(Math.random()*bebidas.length)];
  g++; v+=14;
  if(g<max){
   setTimeout(animar,v);
  }else{
   somG.pause();
   somW.play();
   btnG.disabled=false;

   const c=slotC.innerText;
   const b=slotB.innerText;

   res.innerText=`‚ù§Ô∏è Pr√≥ximo domingo vamos fazer ${c} com ${b}!`;

   if((c.includes("Pizza")||c.includes("Hamb√∫rguer")) && b.includes("Vinho")){
    document.body.classList.add("romantico");
    slotC.classList.add("premio");
    slotB.classList.add("premio");
    esp.innerText="üíñ Noite rom√¢ntica confirmada!";
    sec.style.display="block";
    sec.innerText="üòè Depois do jantar‚Ä¶ a sobremesa √© por nossa conta üî•";
   }else if(c.includes("Ovo")){
    esp.innerText="üòÇ Hoje foi simples, mas com amor!";
   }else{
    esp.innerText="‚ú® Vai ser delicioso!";
   }
  }
 }
 animar();
};
</script>

</body>
</html>
